<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­¦æ˜Ÿæ²³ | é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        html {
    transform: scale(0.85);
    transform-origin: top center;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
}

body {
    width: 100%;
    min-height: 100%;
}
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, #0a0e2a 0%, #1a1f4b 50%, #0a0e2a 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* å¢å¼ºç‰ˆæ˜Ÿç©ºèƒŒæ™¯æ•ˆæœ */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
        }
        
        .star.type-1 {
            animation: twinkle-1 3s infinite alternate;
        }
        
        .star.type-2 {
            animation: twinkle-2 2s infinite;
        }
        
        .star.type-3 {
            animation: twinkle-3 4s infinite alternate;
        }
        
        @keyframes twinkle-1 {
            0%, 100% { opacity: 0.1; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        @keyframes twinkle-2 {
            0% { opacity: 0.2; }
            25% { opacity: 0.8; }
            50% { opacity: 0.3; }
            75% { opacity: 0.9; }
            100% { opacity: 0.2; }
        }
        
        @keyframes twinkle-3 {
            0% { opacity: 0.3; box-shadow: 0 0 5px #fff; }
            33% { opacity: 0.9; box-shadow: 0 0 15px #fff, 0 0 20px #8A2BE2; }
            66% { opacity: 0.5; box-shadow: 0 0 8px #fff; }
            100% { opacity: 0.8; box-shadow: 0 0 10px #fff, 0 0 15px #00FF9D; }
        }
        
        /* æµæ˜Ÿæ•ˆæœ */
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px #fff;
            animation: shoot 3s linear infinite;
            opacity: 0;
        }
        
        @keyframes shoot {
            0% {
                opacity: 0;
                transform: translateX(0) translateY(0);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateX(100vw) translateY(100vh);
            }
        }
        
        /* æ ‡é¢˜åŒºåŸŸ */
        .header {
            text-align: center;
            padding: 25px 0 40px;
            position: relative;
            background: rgba(10, 14, 42, 0.7);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(138, 43, 226, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.2rem;
            font-weight: 900;
            background: linear-gradient(90deg, #00FF9D, #8A2BE2);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }
        
        .subtitle {
            font-size: 1.4rem;
            color: #A0A7FF;
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.7;
            font-weight: 400;
        }
        
        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            background: rgba(20, 25, 60, 0.85);
            backdrop-filter: blur(15px);
            border-radius: 18px;
            padding: 25px 30px;
            margin: 25px auto;
            max-width: 1500px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
            border: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4);
        }
        
        .search-box {
            flex: 1;
            min-width: 350px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 16px 25px;
            padding-left: 50px;
            background: rgba(10, 14, 42, 0.9);
            border: 1px solid rgba(0, 255, 157, 0.4);
            border-radius: 30px;
            color: white;
            font-size: 1.1rem;
            font-family: 'Exo 2', sans-serif;
            transition: all 0.3s ease;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: #00FF9D;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
        }
        
        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #00FF9D;
            font-size: 1.2rem;
        }
        
        .filter-btn {
            background: linear-gradient(90deg, #8A2BE2, #4A00E0);
            border: none;
            color: white;
            padding: 16px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
        }
        
        .filter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.5);
        }
        
        .reset-btn {
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white;
            padding: 16px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            display: flex;
            max-width: 1500px;
            margin: 0 auto 60px;
            gap: 30px;
            padding: 0 30px;
        }
        
        /* çŸ¥è¯†å›¾è°±å®¹å™¨ */
        .graph-container {
            flex: 3;
            background: rgba(20, 25, 60, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            min-height: 700px;
            position: relative;
            overflow: hidden;
        }
        
        #knowledge-graph {
            width: 100%;
            height: 100%;
            min-height: 700px;
        }
        
        /* ä¾§è¾¹æ  */
        .sidebar {
            flex: 1;
            background: rgba(20, 25, 60, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            min-width: 350px;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: #00FF9D;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.4);
        }
        
        /* çŸ¥è¯†ç‚¹è¯¦æƒ…å¡ç‰‡ */
        .knowledge-detail {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .detail-header {
            background: linear-gradient(90deg, #8A2BE2, #4A00E0);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.3);
        }
        
        .detail-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .detail-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .detail-content {
            flex: 1;
            overflow-y: auto;
            max-height: 500px;
            padding-right: 10px;
        }
        
        .detail-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .detail-content::-webkit-scrollbar-track {
            background: rgba(10, 14, 42, 0.5);
            border-radius: 4px;
        }
        
        .detail-content::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 157, 0.3);
            border-radius: 4px;
        }
        
        .detail-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(10, 14, 42, 0.6);
            border-radius: 15px;
            border-left: 4px solid #00FF9D;
        }
        
        .detail-section h3 {
            color: #00FF9D;
            margin-bottom: 15px;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .detail-section p {
            line-height: 1.7;
            margin-bottom: 12px;
            color: #C2C6FF;
            font-size: 1.05rem;
        }
        
        .detail-section ul {
            padding-left: 25px;
            margin-bottom: 12px;
        }
        
        .detail-section li {
            margin-bottom: 10px;
            line-height: 1.6;
            color: #C2C6FF;
            font-size: 1.05rem;
        }
        
        .resource-links {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 15px;
        }
        
        .resource-link {
            background: rgba(0, 255, 157, 0.12);
            border: 1px solid rgba(0, 255, 157, 0.4);
            color: #00FF9D;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .resource-link:hover {
            background: rgba(0, 255, 157, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 157, 0.2);
        }
        
        /* åº•éƒ¨ä¿¡æ¯ */
        .footer {
            text-align: center;
            padding: 40px 30px;
            color: #8A8FFF;
            font-size: 1rem;
            border-top: 1px solid rgba(138, 143, 255, 0.2);
            background: rgba(10, 14, 42, 0.8);
            backdrop-filter: blur(15px);
        }
        
        /* å›¾è°±èŠ‚ç‚¹æ ·å¼ */
        .node {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .node:hover circle {
            stroke-width: 4px;
            stroke: #00FF9D;
            filter: drop-shadow(0 0 8px rgba(0, 255, 157, 0.5));
        }
        
        .node text {
            fill: white;
            font-family: 'Exo 2', sans-serif;
            font-size: 14px;
            font-weight: 500;
            pointer-events: none;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.9);
        }
        
        .node circle {
            stroke-width: 2.5px;
            stroke: white;
            transition: all 0.3s ease;
        }
        
        .link {
            stroke: rgba(255, 255, 255, 0.4);
            stroke-width: 2;
            transition: all 0.3s ease;
        }
        
        /* ç­›é€‰é¢æ¿ */
        .filter-panel {
            position: absolute;
            top: 120px;
            right: 30px;
            background: rgba(20, 25, 60, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 18px;
            padding: 25px;
            width: 350px;
            border: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            z-index: 100;
            display: none;
        }
        
        .filter-panel h3 {
            color: #00FF9D;
            margin-bottom: 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
        }
        
        .filter-group {
            margin-bottom: 25px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 10px;
            color: #C2C6FF;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .filter-group select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(10, 14, 42, 0.9);
            border: 1px solid rgba(0, 255, 157, 0.4);
            border-radius: 10px;
            color: white;
            font-family: 'Exo 2', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .filter-group select:focus {
            outline: none;
            border-color: #00FF9D;
            box-shadow: 0 0 10px rgba(0, 255, 157, 0.2);
        }
        
        .filter-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .filter-checkbox input {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        /* å¯¼èˆªæ ä¸»æ ·å¼ */
        .main-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 14, 42, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }
        
        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 40px;
            height: 80px;
        }
        
        /* Logoæ ·å¼ */
        .nav-logo {
            flex: 0 0 auto;
        }
        
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #fff;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.7rem;
            transition: all 0.3s ease;
        }
        
        .logo-link i {
            color: #00FF9D;
            margin-right: 12px;
            font-size: 2rem;
            transition: all 0.3s ease;
        }
        
        .logo-link:hover {
            color: #00FF9D;
            transform: translateY(-2px);
        }
        
        .logo-link:hover i {
            transform: rotate(180deg);
        }
        
        /* å¯¼èˆªèœå•æ ·å¼ */
        .nav-menu {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            flex: 1;
            justify-content: center;
            gap: 15px;
        }
        
        .nav-item {
            position: relative;
        }
        
        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 18px 30px;
            text-decoration: none;
            color: #C2C6FF;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1.15rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .nav-link i {
            font-size: 1.4rem;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        .nav-link .nav-text {
            font-size: 1rem;
            letter-spacing: 1px;
        }
        
        /* å¯¼èˆªæŒ‡ç¤ºå™¨ */
        .nav-indicator {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 4px;
            background: linear-gradient(90deg, #00FF9D, #8A2BE2);
            border-radius: 4px 4px 0 0;
            transition: width 0.3s ease;
        }
        
        /* å¯¼èˆªé“¾æ¥æ‚¬åœæ•ˆæœ */
        .nav-link:hover {
            color: #fff;
            background: rgba(138, 43, 226, 0.15);
            transform: translateY(-3px);
        }
        
        .nav-link:hover i {
            color: #00FF9D;
            transform: scale(1.2);
        }
        
        .nav-link:hover .nav-indicator {
            width: 80%;
        }
        
        /* æ¿€æ´»çŠ¶æ€ */
        .nav-link.active {
            color: #fff;
            background: rgba(138, 43, 226, 0.25);
        }
        
        .nav-link.active i {
            color: #00FF9D;
        }
        
        .nav-link.active .nav-indicator {
            width: 100%;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
        }
        
        /* ç”¨æˆ·åŒºåŸŸ */
        .nav-user {
            flex: 0 0 auto;
            position: relative;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8A2BE2, #00FF9D);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .user-avatar i {
            font-size: 1.7rem;
            color: white;
        }
        
        .user-avatar:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 0 25px rgba(138, 43, 226, 0.6);
        }
        
        /* ç”¨æˆ·èœå• */
        .user-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(20, 25, 60, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 12px;
            padding: 20px 0;
            min-width: 200px;
            border: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
            opacity: 0;
            visibility: hidden;
            transform: translateY(15px);
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .nav-user:hover .user-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .user-link {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            text-decoration: none;
            color: #C2C6FF;
            font-family: 'Exo 2', sans-serif;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .user-link i {
            width: 22px;
            margin-right: 15px;
            color: #8A2BE2;
            font-size: 1.2rem;
        }
        
        .user-link:hover {
            color: #fff;
            background: rgba(138, 43, 226, 0.25);
        }
        
        .user-link:hover i {
            color: #00FF9D;
        }
        
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
        .mobile-menu-toggle {
            display: none;
            cursor: pointer;
        }
        
        .hamburger {
            width: 35px;
            height: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .hamburger span {
            display: block;
            height: 4px;
            width: 100%;
            background: #00FF9D;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        /* ç§»åŠ¨ç«¯èœå• */
        .mobile-menu {
            display: none;
            background: rgba(10, 14, 42, 0.98);
            backdrop-filter: blur(15px);
            position: fixed;
            top: 80px;
            left: 0;
            width: 100%;
            padding: 25px;
            border-top: 1px solid rgba(138, 43, 226, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
            transform: translateY(-100%);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .mobile-menu.active {
            transform: translateY(0);
            opacity: 1;
        }
        
        .mobile-nav-menu {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .mobile-nav-item {
            border-radius: 12px;
            overflow: hidden;
        }
        
        .mobile-nav-link {
            display: flex;
            align-items: center;
            padding: 20px 25px;
            text-decoration: none;
            color: #C2C6FF;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            background: rgba(20, 25, 60, 0.8);
            border-left: 5px solid transparent;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-link i {
            width: 35px;
            font-size: 1.4rem;
            margin-right: 18px;
            color: #8A2BE2;
        }
        
        .mobile-nav-link.active {
            color: #fff;
            background: rgba(138, 43, 226, 0.25);
            border-left-color: #00FF9D;
        }
        
        .mobile-nav-link.active i {
            color: #00FF9D;
        }
        
        .mobile-nav-link:hover {
            color: #fff;
            background: rgba(138, 43, 226, 0.35);
            transform: translateX(8px);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                min-width: auto;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: auto;
            }
            
            .nav-menu {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .nav-user .user-menu {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .logo {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
                padding: 0 20px;
            }
            
            .graph-container, .sidebar {
                padding: 20px;
            }
            
            .nav-container {
                padding: 0 25px;
                height: 70px;
            }
            
            .logo-link {
                font-size: 1.5rem;
            }
            
            .logo-link i {
                font-size: 1.8rem;
            }
            
            .mobile-menu {
                top: 70px;
            }
        }
        
        @media (max-width: 480px) {
            .logo {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .control-panel {
                padding: 20px;
                margin: 20px 15px;
            }
            
            .main-content {
                padding: 0 15px;
            }
            
            .graph-container, .sidebar {
                padding: 15px;
            }
            
            .nav-container {
                padding: 0 20px;
                height: 65px;
            }
            
            .logo-link {
                font-size: 1.3rem;
            }
            
            .mobile-menu {
                top: 65px;
            }
        }
        
        /* å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ */
        .main-nav.scrolled {
            background: rgba(10, 14, 42, 0.98);
            height: 70px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.8);
        }
        
        .main-nav.scrolled .nav-container {
            height: 70px;
        }
        
        /* é¡µé¢å†…å®¹åç§»ï¼ˆé¿å…è¢«å›ºå®šå¯¼èˆªæ é®æŒ¡ï¼‰ */
        body {
            padding-top: 80px;
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 70px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 65px;
            }
        }
    </style>
</head>
<body>
    <!-- æ·»åŠ å›ºå®šå¯¼èˆªæ  -->
    <nav class="main-nav">
        <div class="nav-container">
            <!-- ç½‘ç«™Logo -->
            <div class="nav-logo">
                <a href="æ•°å­¦å®‡å®™.html" class="logo-link">
                    <i class="fas fa-atom"></i>
                    <span class="logo-text">MathVerse</span>
                </a>
            </div>
            
            <!-- å¯¼èˆªèœå• -->
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="æ•°å­¦å®‡å®™.html" class="nav-link active" data-page="home">
                        <i class="fas fa-home"></i>
                        <span class="nav-text">é¦–é¡µ</span>
                        <div class="nav-indicator"></div>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="æ™ºæ…§å·¥åŠ.html" class="nav-link" data-page="problem-lab">
                        <i class="fas fa-tools"></i>
                        <span class="nav-text">æ™ºæ…§å·¥åŠ</span>
                        <div class="nav-indicator"></div>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="æ™ºèƒ½é¢˜åº“.html" class="nav-link" data-page="question-bank">
                        <i class="fas fa-brain"></i>
                        <span class="nav-text">æ™ºèƒ½é¢˜åº“</span>
                        <div class="nav-indicator"></div>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="å¤‡è€ƒå†²åˆº.html" class="nav-link" data-page="exam-prep">
                        <i class="fas fa-rocket"></i>
                        <span class="nav-text">å¤‡è€ƒå†²åˆº</span>
                        <div class="nav-indicator"></div>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="å­¦ä¹ ç¤¾åŒº.html
" class="nav-link" data-page="community">
                        <i class="fas fa-users"></i>
                        <span class="nav-text">å­¦ä¹ ç¤¾åŒº</span>
                        <div class="nav-indicator"></div>
                    </a>
                </li>
            </ul>
            
            <!-- ç”¨æˆ·åŠŸèƒ½ -->
            <div class="nav-user">
                <div class="user-avatar">
                    <i class="fas fa-user-astronaut"></i>
                </div>
                <div class="user-menu">
                    <a  class="user-link">
                        <i class="fas fa-user-circle"></i>
                        <span>ä¸ªäººä¸­å¿ƒ</span>
                    </a>
                    <a  class="user-link">
                        <i class="fas fa-cog"></i>
                        <span>è®¾ç½®</span>
                    </a>
                    <a class="user-link">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>é€€å‡º</span>
                    </a>
                </div>
            </div>
            
            <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
            <div class="mobile-menu-toggle" id="mobile-menu-toggle">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
        
        <!-- ç§»åŠ¨ç«¯èœå• -->
        <div class="mobile-menu" id="mobile-menu">
            <ul class="mobile-nav-menu">
                <li class="mobile-nav-item">
                    <a href="æ•°å­¦å®‡å®™.html" class="mobile-nav-link active">
                        <i class="fas fa-home"></i>
                        <span>é¦–é¡µ</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/problem-lab.html" class="mobile-nav-link">
                        <i class="fas fa-tools"></i>
                        <span>æ™ºæ…§å·¥åŠ</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/smart-question-bank.html" class="mobile-nav-link">
                        <i class="fas fa-brain"></i>
                        <span>æ™ºèƒ½é¢˜åº“</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/gaokao-zone.html" class="mobile-nav-link">
                        <i class="fas fa-rocket"></i>
                        <span>å¤‡è€ƒå†²åˆº</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/community.html" class="mobile-nav-link">
                        <i class="fas fa-users"></i>
                        <span>å­¦ä¹ ç¤¾åŒº</span>
                    </a>
                </li>
                <li class="mobile-nav-item">
                    <a href="/profile" class="mobile-nav-link">
                        <i class="fas fa-user-circle"></i>
                        <span>ä¸ªäººä¸­å¿ƒ</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    
    <!-- æ˜Ÿç©ºèƒŒæ™¯å®¹å™¨ -->
    <div class="stars-container" id="stars-container"></div>
    
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="header">
        <h1 class="logo">æ•°å­¦æ˜Ÿæ²³</h1>
        <p class="subtitle">é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°± | å¯è§†åŒ–æ¢ç´¢æ•°å­¦çŸ¥è¯†ä½“ç³»ï¼Œæ„å»ºä½ çš„æ•°å­¦çŸ¥è¯†ç½‘ç»œ</p>
    </header>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="search-input" placeholder="æœç´¢çŸ¥è¯†ç‚¹ (å¦‚: å‡½æ•°, å‡ ä½•, å¯¼æ•°, æ¦‚ç‡...)">
        </div>
        <button class="filter-btn" id="filter-toggle">
            <i class="fas fa-filter"></i> ç­›é€‰çŸ¥è¯†ç‚¹
        </button>
        <button class="reset-btn" id="reset-graph">
            <i class="fas fa-redo"></i> é‡ç½®å›¾è°±
        </button>
    </div>
    
    <!-- ç­›é€‰é¢æ¿ -->
    <div class="filter-panel" id="filter-panel">
        <h3>ç­›é€‰çŸ¥è¯†ç‚¹</h3>
        
        <div class="filter-group">
            <label for="grade-filter">å¹´çº§:</label>
            <select id="grade-filter">
                <option value="all">å…¨éƒ¨å¹´çº§</option>
                <option value="é«˜ä¸€">é«˜ä¸€</option>
                <option value="é«˜äºŒ">é«˜äºŒ</option>
                <option value="é«˜ä¸‰">é«˜ä¸‰</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label for="type-filter">çŸ¥è¯†ç±»å‹:</label>
            <select id="type-filter">
                <option value="all">å…¨éƒ¨ç±»å‹</option>
                <option value="ä»£æ•°">ä»£æ•°</option>
                <option value="å‡ ä½•">å‡ ä½•</option>
                <option value="æ¦‚ç‡ç»Ÿè®¡">æ¦‚ç‡ç»Ÿè®¡</option>
                <option value="å‡½æ•°">å‡½æ•°</option>
                <option value="å¾®ç§¯åˆ†">å¯¼æ•°</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label>éš¾åº¦çº§åˆ«:</label>
            <div class="filter-checkbox">
                <input type="checkbox" id="difficulty-easy" checked>
                <label for="difficulty-easy">åŸºç¡€</label>
            </div>
            <div class="filter-checkbox">
                <input type="checkbox" id="difficulty-medium" checked>
                <label for="difficulty-medium">ä¸­ç­‰</label>
            </div>
            <div class="filter-checkbox">
                <input type="checkbox" id="difficulty-hard" checked>
                <label for="difficulty-hard">è¿›é˜¶</label>
            </div>
        </div>
        
        <div class="filter-group">
            <label>æ˜¾ç¤ºè¿æ¥:</label>
            <div class="filter-checkbox">
                <input type="checkbox" id="show-links" checked>
                <label for="show-links">æ˜¾ç¤ºçŸ¥è¯†ç‚¹å…³è”</label>
            </div>
        </div>
        
        <button class="filter-btn" id="apply-filter" style="width: 100%; margin-top: 15px;">
            <i class="fas fa-check"></i> åº”ç”¨ç­›é€‰
        </button>
    </div>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <!-- çŸ¥è¯†å›¾è°±å®¹å™¨ -->
        <div class="graph-container">
            <div id="knowledge-graph"></div>
        </div>
        
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <h2 class="sidebar-title">çŸ¥è¯†ç‚¹è¯¦æƒ…</h2>
            <div class="knowledge-detail" id="knowledge-detail">
                <div class="detail-header">
                    <h2 class="detail-title">é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±</h2>
                    <p class="detail-subtitle">ç‚¹å‡»å›¾è°±ä¸­çš„èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
                </div>
                <div class="detail-content">
                    <div class="detail-section">
                        <h3>ğŸ“š ä½¿ç”¨è¯´æ˜</h3>
                        <p>è¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±ï¼Œå±•ç¤ºäº†é«˜ä¸­æ•°å­¦çš„çŸ¥è¯†ä½“ç³»ä¸å…³è”ã€‚</p>
                        <ul>
                            <li>ç‚¹å‡»ä»»æ„èŠ‚ç‚¹æŸ¥çœ‹çŸ¥è¯†ç‚¹è¯¦ç»†ä¿¡æ¯</li>
                            <li>æ‹–æ‹½èŠ‚ç‚¹å¯ä»¥é‡æ–°å¸ƒå±€å›¾è°±</li>
                            <li>ä½¿ç”¨æœç´¢æ¡†å¿«é€ŸæŸ¥æ‰¾çŸ¥è¯†ç‚¹</li>
                            <li>ä½¿ç”¨ç­›é€‰åŠŸèƒ½æŒ‰å¹´çº§ã€ç±»å‹è¿‡æ»¤çŸ¥è¯†ç‚¹</li>
                        </ul>
                    </div>
                    <div class="detail-section">
                        <h3>ğŸ§© çŸ¥è¯†ä½“ç³»</h3>
                        <p>é«˜ä¸­æ•°å­¦ä¸»è¦åŒ…å«ä»¥ä¸‹å››å¤§æ¨¡å—ï¼š</p>
                        <ul>
                            <li><strong>ä»£æ•°</strong>ï¼šé›†åˆã€å‡½æ•°ã€æ•°åˆ—ã€ä¸ç­‰å¼ç­‰</li>
                            <li><strong>å‡ ä½•</strong>ï¼šå¹³é¢å‡ ä½•ã€ç«‹ä½“å‡ ä½•ã€è§£æå‡ ä½•ç­‰</li>
                            <li><strong>æ¦‚ç‡ç»Ÿè®¡</strong>ï¼šæ¦‚ç‡ã€ç»Ÿè®¡ã€æ’åˆ—ç»„åˆç­‰</li>
                            <li><strong>å¯¼æ•°åˆæ­¥</strong>ï¼šå¯¼æ•°ç­‰</li>
                        </ul>
                    </div>
                    <div class="detail-section">
                        <h3>ğŸš€ å­¦ä¹ å»ºè®®</h3>
                        <p>å»ºè®®æŒ‰ç…§çŸ¥è¯†ä½“ç³»çš„å…³è”æ€§è¿›è¡Œç³»ç»Ÿå­¦ä¹ ï¼Œå…ˆä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥ã€‚</p>
                        <p>ä½¿ç”¨æœ¬å›¾è°±å¯ä»¥ï¼š</p>
                        <ul>
                            <li>äº†è§£çŸ¥è¯†ç‚¹ä¹‹é—´çš„å‰ç½®å…³ç³»</li>
                            <li>å‘ç°çŸ¥è¯†è–„å¼±ç¯èŠ‚</li>
                            <li>è§„åˆ’ç³»ç»Ÿæ€§å­¦ä¹ è·¯å¾„</li>
                        </ul>
                        <div class="resource-links">
                            <a href="å­¦ä¹ èµ„æº.html" class="resource-link"target="_blank">çŸ¥è¯†ç‚¹è®²è§£è§†é¢‘</a>
                            <a href="æ™ºèƒ½é¢˜åº“.html" class="resource-link"target="_blank">å…¸å‹ä¾‹é¢˜è®­ç»ƒ</a>
                            <a href="å¤‡è€ƒå†²åˆº.html" class="resource-link"target="_blank">é«˜è€ƒè€ƒç‚¹è§£æ</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <footer class="footer">
        <p>Â© 2025 æ•°å­¦æ˜Ÿæ²³ | MathVerse é«˜ä¸­æ•™è‚²èµ„æºå¹³å° | é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°± v1.0</p>
        <p style="margin-top: 15px; font-size: 1.1rem;">å»ºè®®ä½¿ç”¨ Chrome æˆ– Edge æµè§ˆå™¨è·å¾—æœ€ä½³ä½“éªŒ</p>
    </footer>
    
    <script>
        // å¢å¼ºç‰ˆæ˜Ÿç©ºèƒŒæ™¯åŠŸèƒ½
        class Starfield {
            constructor() {
                this.container = document.getElementById('stars-container');
                this.starCount = 200;
                this.shootingStarsEnabled = true;
                this.shootingStarInterval = null;
                
                this.init();
            }
            
            init() {
                this.createStars();
                if (this.shootingStarsEnabled) this.startShootingStars();
            }
            
            // åˆ›å»ºæ˜Ÿæ˜Ÿ
            createStars() {
                for (let i = 0; i < this.starCount; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');
                    
                    // éšæœºä½ç½®
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    
                    // éšæœºå¤§å°
                    const size = Math.random() * 4;
                    
                    // éšæœºç±»å‹ï¼ˆé—ªçƒæ•ˆæœï¼‰
                    const starType = Math.floor(Math.random() * 3) + 1;
                    star.classList.add(`type-${starType}`);
                    
                    // éšæœºé¢œè‰²
                    const colorRand = Math.random();
                    if (colorRand < 0.7) {
                        star.style.backgroundColor = '#FFFFFF';
                    } else if (colorRand < 0.85) {
                        star.style.backgroundColor = '#A0A7FF';
                    } else if (colorRand < 0.95) {
                        star.style.backgroundColor = '#FFA0A0';
                    } else {
                        star.style.backgroundColor = '#A0FFA0';
                    }
                    
                    // è®¾ç½®ä½ç½®å’Œå¤§å°
                    star.style.left = `${x}%`;
                    star.style.top = `${y}%`;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;
                    
                    // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                    const delay = Math.random() * 5;
                    star.style.animationDelay = `${delay}s`;
                    
                    this.container.appendChild(star);
                }
            }
            
            // å¼€å§‹æµæ˜Ÿæ•ˆæœ
            startShootingStars() {
                this.shootingStarInterval = setInterval(() => {
                    this.createShootingStar();
                }, 2500);
            }
            
            // åˆ›å»ºå•ä¸ªæµæ˜Ÿ
            createShootingStar() {
                const shootingStar = document.createElement('div');
                shootingStar.classList.add('shooting-star');
                
                // éšæœºèµ·å§‹ä½ç½®
                const fromLeft = Math.random() > 0.5;
                let startX, startY;
                
                if (fromLeft) {
                    startX = Math.random() * 20;
                    startY = Math.random() * 30;
                } else {
                    startX = Math.random() * 40;
                    startY = 0;
                }
                
                // éšæœºé¢œè‰²
                const colors = ['#FFFFFF', '#00FF9D', '#8A2BE2', '#00B8FF'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                // è®¾ç½®æ ·å¼
                shootingStar.style.left = `${startX}%`;
                shootingStar.style.top = `${startY}%`;
                shootingStar.style.backgroundColor = color;
                shootingStar.style.boxShadow = `0 0 10px 2px ${color}`;
                
                // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´
                const duration = 1 + Math.random() * 2;
                shootingStar.style.animationDuration = `${duration}s`;
                
                this.container.appendChild(shootingStar);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (shootingStar.parentNode) {
                        shootingStar.remove();
                    }
                }, duration * 1000);
            }
        }
        
        // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
        const starfield = new Starfield();
        
        // çŸ¥è¯†å›¾è°±æ•°æ®
        const knowledgeData = {
            nodes: [
                // ä»£æ•°æ¨¡å—
                { id: "é›†åˆ", group: "ä»£æ•°", grade: "é«˜ä¸€", difficulty: "åŸºç¡€", description: "é›†åˆçš„æ¦‚å¿µã€è¡¨ç¤ºæ–¹æ³•å’Œè¿ç®—" },
                { id: "å‡½æ•°", group: "ä»£æ•°", grade: "é«˜ä¸€", difficulty: "åŸºç¡€", description: "å‡½æ•°çš„æ¦‚å¿µã€æ€§è´¨å’Œå›¾åƒ" },
                { id: "æŒ‡æ•°å‡½æ•°", group: "ä»£æ•°", grade: "é«˜ä¸€", difficulty: "ä¸­ç­‰", description: "æŒ‡æ•°å‡½æ•°çš„å®šä¹‰ã€æ€§è´¨å’Œå›¾åƒ" },
                { id: "å¯¹æ•°å‡½æ•°", group: "ä»£æ•°", grade: "é«˜ä¸€", difficulty: "ä¸­ç­‰", description: "å¯¹æ•°å‡½æ•°çš„å®šä¹‰ã€æ€§è´¨å’Œå›¾åƒ" },
                { id: "ä¸‰è§’å‡½æ•°", group: "ä»£æ•°", grade: "é«˜ä¸€", difficulty: "ä¸­ç­‰", description: "ä¸‰è§’å‡½æ•°çš„å®šä¹‰ã€æ€§è´¨å’Œå›¾åƒ" },
                { id: "æ•°åˆ—", group: "ä»£æ•°", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "ç­‰å·®æ•°åˆ—ã€ç­‰æ¯”æ•°åˆ—çš„æ¦‚å¿µå’Œæ±‚å’Œ" },
                { id: "ä¸ç­‰å¼", group: "ä»£æ•°", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "ä¸€å…ƒäºŒæ¬¡ä¸ç­‰å¼ã€çº¿æ€§è§„åˆ’ç­‰" },
                
                // å‡ ä½•æ¨¡å—
                { id: "å¹³é¢å‡ ä½•", group: "å‡ ä½•", grade: "é«˜ä¸€", difficulty: "åŸºç¡€", description: "å¹³é¢å›¾å½¢çš„åŸºæœ¬æ€§è´¨å’Œå®šç†" },
                { id: "ç«‹ä½“å‡ ä½•", group: "å‡ ä½•", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "ç©ºé—´å‡ ä½•ä½“çš„æ€§è´¨å’Œè®¡ç®—" },
                { id: "è§£æå‡ ä½•", group: "å‡ ä½•", grade: "é«˜äºŒ", difficulty: "è¿›é˜¶", description: "åæ ‡ç³»ã€ç›´çº¿ã€åœ†çš„æ–¹ç¨‹" },
                { id: "åœ†é”¥æ›²çº¿", group: "å‡ ä½•", grade: "é«˜äºŒ", difficulty: "è¿›é˜¶", description: "æ¤­åœ†ã€åŒæ›²çº¿ã€æŠ›ç‰©çº¿çš„æ€§è´¨å’Œæ–¹ç¨‹" },
                { id: "å‘é‡", group: "å‡ ä½•", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "å‘é‡çš„æ¦‚å¿µã€è¿ç®—å’Œåº”ç”¨" },
                
                // æ¦‚ç‡ç»Ÿè®¡æ¨¡å—
                { id: "æ¦‚ç‡", group: "æ¦‚ç‡ç»Ÿè®¡", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "éšæœºäº‹ä»¶çš„æ¦‚ç‡è®¡ç®—" },
                { id: "ç»Ÿè®¡", group: "æ¦‚ç‡ç»Ÿè®¡", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "æ•°æ®çš„æ”¶é›†ã€æ•´ç†å’Œåˆ†æ" },
                { id: "æ’åˆ—ç»„åˆ", group: "æ¦‚ç‡ç»Ÿè®¡", grade: "é«˜äºŒ", difficulty: "ä¸­ç­‰", description: "æ’åˆ—ã€ç»„åˆå’ŒäºŒé¡¹å¼å®šç†" },
                
                // å¾®ç§¯åˆ†æ¨¡å—
                { id: "å¯¼æ•°", group: "å¾®ç§¯åˆ†", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "å¯¼æ•°çš„æ¦‚å¿µã€è®¡ç®—å’Œåº”ç”¨" },
                { id: "ç§¯åˆ†", group: "å¾®ç§¯åˆ†", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "å®šç§¯åˆ†å’Œä¸å®šç§¯åˆ†çš„æ¦‚å¿µå’Œè®¡ç®—" },
                { id: "æé™", group: "å¾®ç§¯åˆ†", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "æ•°åˆ—å’Œå‡½æ•°çš„æé™" },
                
                // ç»¼åˆåº”ç”¨
                { id: "å‡½æ•°åº”ç”¨", group: "å‡½æ•°", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "å‡½æ•°åœ¨å®é™…é—®é¢˜ä¸­çš„åº”ç”¨" },
                { id: "å‡ ä½•è¯æ˜", group: "å‡ ä½•", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "å‡ ä½•é—®é¢˜çš„è¯æ˜æ–¹æ³•" },
                { id: "æ•°å­¦å»ºæ¨¡", group: "ç»¼åˆ", grade: "é«˜ä¸‰", difficulty: "è¿›é˜¶", description: "æ•°å­¦å»ºæ¨¡çš„åŸºæœ¬æ–¹æ³•" }
            ],
            links: [
                // ä»£æ•°å†…éƒ¨å…³è”
                { source: "é›†åˆ", target: "å‡½æ•°", strength: 0.8 },
                { source: "å‡½æ•°", target: "æŒ‡æ•°å‡½æ•°", strength: 0.7 },
                { source: "å‡½æ•°", target: "å¯¹æ•°å‡½æ•°", strength: 0.7 },
                { source: "å‡½æ•°", target: "ä¸‰è§’å‡½æ•°", strength: 0.7 },
                { source: "å‡½æ•°", target: "æ•°åˆ—", strength: 0.6 },
                { source: "å‡½æ•°", target: "ä¸ç­‰å¼", strength: 0.5 },
                { source: "æŒ‡æ•°å‡½æ•°", target: "å¯¹æ•°å‡½æ•°", strength: 0.9 },
                
                // å‡ ä½•å†…éƒ¨å…³è”
                { source: "å¹³é¢å‡ ä½•", target: "ç«‹ä½“å‡ ä½•", strength: 0.7 },
                { source: "å¹³é¢å‡ ä½•", target: "è§£æå‡ ä½•", strength: 0.8 },
                { source: "è§£æå‡ ä½•", target: "åœ†é”¥æ›²çº¿", strength: 0.9 },
                { source: "å‘é‡", target: "è§£æå‡ ä½•", strength: 0.7 },
                { source: "å‘é‡", target: "ç«‹ä½“å‡ ä½•", strength: 0.6 },
                
                // æ¦‚ç‡ç»Ÿè®¡å†…éƒ¨å…³è”
                { source: "æ’åˆ—ç»„åˆ", target: "æ¦‚ç‡", strength: 0.8 },
                { source: "ç»Ÿè®¡", target: "æ¦‚ç‡", strength: 0.6 },
                
                // å¾®ç§¯åˆ†å†…éƒ¨å…³è”
                { source: "æé™", target: "å¯¼æ•°", strength: 0.9 },
                { source: "å¯¼æ•°", target: "ç§¯åˆ†", strength: 0.9 },
                
                // è·¨æ¨¡å—å…³è”
                { source: "å‡½æ•°", target: "å¯¼æ•°", strength: 0.8 },
                { source: "ä¸‰è§’å‡½æ•°", target: "å¯¼æ•°", strength: 0.7 },
                { source: "å‡½æ•°", target: "å‡½æ•°åº”ç”¨", strength: 0.9 },
                { source: "å¹³é¢å‡ ä½•", target: "å‡ ä½•è¯æ˜", strength: 0.8 },
                { source: "ç«‹ä½“å‡ ä½•", target: "å‡ ä½•è¯æ˜", strength: 0.8 },
                { source: "å‡½æ•°", target: "æ•°å­¦å»ºæ¨¡", strength: 0.7 },
                { source: "æ¦‚ç‡", target: "æ•°å­¦å»ºæ¨¡", strength: 0.6 },
                { source: "ç»Ÿè®¡", target: "æ•°å­¦å»ºæ¨¡", strength: 0.7 }
            ]
        };
        
        // çŸ¥è¯†å›¾è°±è¯¦ç»†æ•°æ®
        const knowledgeDetails = {
            "é›†åˆ": {
                title: "é›†åˆ",
                subtitle: "é«˜ä¸€ | ä»£æ•° | åŸºç¡€",
                description: "é›†åˆæ˜¯æ•°å­¦ä¸­æœ€åŸºæœ¬çš„æ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒæ˜¯å…·æœ‰æŸç§ç‰¹å®šæ€§è´¨çš„äº‹ç‰©çš„æ€»ä½“ã€‚",
                content: `
                    <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <p>é›†åˆæ˜¯ç”±ä¸€äº›ç¡®å®šçš„ã€ä¸åŒçš„å¯¹è±¡ç»„æˆçš„æ•´ä½“ã€‚é›†åˆä¸­çš„å¯¹è±¡ç§°ä¸ºå…ƒç´ ã€‚</p>
                    
                    <h3>ä¸»è¦å†…å®¹</h3>
                    <ul>
                        <li>é›†åˆçš„è¡¨ç¤ºæ³•ï¼šåˆ—ä¸¾æ³•ã€æè¿°æ³•</li>
                        <li>é›†åˆé—´çš„å…³ç³»ï¼šå­é›†ã€çœŸå­é›†ã€ç›¸ç­‰</li>
                        <li>é›†åˆçš„è¿ç®—ï¼šäº¤é›†ã€å¹¶é›†ã€è¡¥é›†</li>
                        <li>å¸¸ç”¨æ•°é›†ï¼šè‡ªç„¶æ•°é›†ã€æ•´æ•°é›†ã€æœ‰ç†æ•°é›†ã€å®æ•°é›†</li>
                    </ul>
                    
                    <h3>å­¦ä¹ è¦ç‚¹</h3>
                    <p>æŒæ¡é›†åˆçš„åŸºæœ¬æ¦‚å¿µå’Œè¡¨ç¤ºæ–¹æ³•ï¼Œç†è§£é›†åˆé—´çš„å…³ç³»å’Œè¿ç®—è§„åˆ™ã€‚</p>
                `,
                resources: ["é›†åˆæ¦‚å¿µè®²è§£", "é›†åˆè¿ç®—ä¾‹é¢˜", "é›†åˆç»¼åˆç»ƒä¹ "]
            },
            "å‡½æ•°": {
                title: "å‡½æ•°",
                subtitle: "é«˜ä¸€ | ä»£æ•° | åŸºç¡€",
                description: "å‡½æ•°æ˜¯æè¿°ä¸¤ä¸ªå˜é‡ä¹‹é—´ä¾èµ–å…³ç³»çš„é‡è¦æ•°å­¦æ¦‚å¿µã€‚",
                content: `
                    <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <p>å‡½æ•°æ˜¯å»ºç«‹åœ¨ä¸¤ä¸ªéç©ºæ•°é›†ä¹‹é—´çš„ä¸€ç§ç‰¹æ®Šå¯¹åº”å…³ç³»ï¼Œå¯¹äºå®šä¹‰åŸŸä¸­çš„æ¯ä¸€ä¸ªè‡ªå˜é‡ï¼Œéƒ½æœ‰å”¯ä¸€ç¡®å®šçš„å‡½æ•°å€¼ä¸ä¹‹å¯¹åº”ã€‚</p>
                    
                    <h3>ä¸»è¦å†…å®¹</h3>
                    <ul>
                        <li>å‡½æ•°çš„å®šä¹‰ï¼šæ˜ å°„è§‚ç‚¹ä¸‹çš„å‡½æ•°å®šä¹‰</li>
                        <li>å‡½æ•°çš„è¡¨ç¤ºæ³•ï¼šè§£ææ³•ã€åˆ—è¡¨æ³•ã€å›¾åƒæ³•</li>
                        <li>å‡½æ•°çš„æ€§è´¨ï¼šå•è°ƒæ€§ã€å¥‡å¶æ€§ã€å‘¨æœŸæ€§</li>
                        <li>åŸºæœ¬åˆç­‰å‡½æ•°ï¼šå¹‚å‡½æ•°ã€æŒ‡æ•°å‡½æ•°ã€å¯¹æ•°å‡½æ•°ã€ä¸‰è§’å‡½æ•°</li>
                    </ul>
                    
                    <h3>å­¦ä¹ è¦ç‚¹</h3>
                    <p>ç†è§£å‡½æ•°çš„æ¦‚å¿µï¼ŒæŒæ¡å‡½æ•°çš„è¡¨ç¤ºæ–¹æ³•å’ŒåŸºæœ¬æ€§è´¨ï¼Œèƒ½å¤Ÿç»˜åˆ¶å¸¸è§å‡½æ•°çš„å›¾åƒã€‚</p>
                `,
                resources: ["å‡½æ•°æ¦‚å¿µè§†é¢‘", "å‡½æ•°æ€§è´¨ç»ƒä¹ ", "å‡½æ•°å›¾åƒç»˜åˆ¶"]
            },
            "å¯¼æ•°": {
                title: "å¯¼æ•°",
                subtitle: "é«˜ä¸‰ | å¾®ç§¯åˆ† | è¿›é˜¶",
                description: "å¯¼æ•°æ˜¯å¾®ç§¯åˆ†ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œè¡¨ç¤ºå‡½æ•°åœ¨æŸä¸€ç‚¹å¤„çš„å˜åŒ–ç‡ã€‚",
                content: `
                    <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <p>å¯¼æ•°æ˜¯å‡½æ•°åœ¨æŸä¸€ç‚¹å¤„çš„ç¬æ—¶å˜åŒ–ç‡ï¼Œåæ˜ äº†å‡½æ•°åœ¨è¯¥ç‚¹é™„è¿‘çš„å˜åŒ–è¶‹åŠ¿ã€‚</p>
                    
                    <h3>ä¸»è¦å†…å®¹</h3>
                    <ul>
                        <li>å¯¼æ•°çš„å®šä¹‰ï¼šæé™è§‚ç‚¹ä¸‹çš„å¯¼æ•°å®šä¹‰</li>
                        <li>å¯¼æ•°çš„è®¡ç®—ï¼šåŸºæœ¬æ±‚å¯¼å…¬å¼ã€æ±‚å¯¼æ³•åˆ™</li>
                        <li>å¯¼æ•°çš„åº”ç”¨ï¼šåˆ‡çº¿æ–¹ç¨‹ã€å‡½æ•°å•è°ƒæ€§ã€æå€¼é—®é¢˜</li>
                        <li>é«˜é˜¶å¯¼æ•°ï¼šäºŒé˜¶å¯¼æ•°åŠå…¶åº”ç”¨</li>
                    </ul>
                    
                    <h3>å­¦ä¹ è¦ç‚¹</h3>
                    <p>ç†è§£å¯¼æ•°çš„æ¦‚å¿µå’Œå‡ ä½•æ„ä¹‰ï¼ŒæŒæ¡å¸¸è§å‡½æ•°çš„æ±‚å¯¼æ–¹æ³•ï¼Œèƒ½å¤Ÿåº”ç”¨å¯¼æ•°è§£å†³å®é™…é—®é¢˜ã€‚</p>
                `,
                resources: ["å¯¼æ•°æ¦‚å¿µè®²è§£", "æ±‚å¯¼æ–¹æ³•è®­ç»ƒ", "å¯¼æ•°åº”ç”¨ä¾‹é¢˜"]
            },
            "æ¦‚ç‡": {
                title: "æ¦‚ç‡",
                subtitle: "é«˜äºŒ | æ¦‚ç‡ç»Ÿè®¡ | ä¸­ç­‰",
                description: "æ¦‚ç‡æ˜¯ç ”ç©¶éšæœºç°è±¡å‘ç”Ÿå¯èƒ½æ€§çš„æ•°å­¦åˆ†æ”¯ã€‚",
                content: `
                    <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <p>æ¦‚ç‡æ˜¯åˆ»ç”»éšæœºäº‹ä»¶å‘ç”Ÿå¯èƒ½æ€§å¤§å°çš„æ•°å€¼ï¼Œå–å€¼èŒƒå›´åœ¨0åˆ°1ä¹‹é—´ã€‚</p>
                    
                    <h3>ä¸»è¦å†…å®¹</h3>
                    <ul>
                        <li>éšæœºäº‹ä»¶ï¼šå¿…ç„¶äº‹ä»¶ã€ä¸å¯èƒ½äº‹ä»¶ã€éšæœºäº‹ä»¶</li>
                        <li>æ¦‚ç‡çš„å®šä¹‰ï¼šå¤å…¸æ¦‚å‹ã€å‡ ä½•æ¦‚å‹ã€ç»Ÿè®¡å®šä¹‰</li>
                        <li>æ¦‚ç‡çš„è®¡ç®—ï¼šåŠ æ³•å…¬å¼ã€ä¹˜æ³•å…¬å¼ã€æ¡ä»¶æ¦‚ç‡</li>
                        <li>éšæœºå˜é‡ï¼šç¦»æ•£å‹éšæœºå˜é‡ã€è¿ç»­å‹éšæœºå˜é‡</li>
                    </ul>
                    
                    <h3>å­¦ä¹ è¦ç‚¹</h3>
                    <p>ç†è§£æ¦‚ç‡çš„åŸºæœ¬æ¦‚å¿µï¼ŒæŒæ¡æ¦‚ç‡çš„è®¡ç®—æ–¹æ³•ï¼Œèƒ½å¤Ÿåº”ç”¨æ¦‚ç‡çŸ¥è¯†è§£å†³å®é™…é—®é¢˜ã€‚</p>
                `,
                resources: ["æ¦‚ç‡åŸºç¡€è®²è§£", "æ¦‚ç‡è®¡ç®—ç»ƒä¹ ", "æ¦‚ç‡åº”ç”¨å®ä¾‹"]
            }
        };
        
        // é»˜è®¤çŸ¥è¯†è¯¦æƒ…
        const defaultDetail = {
            title: "é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±",
            subtitle: "ç‚¹å‡»å›¾è°±ä¸­çš„èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯",
            description: "è¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±ï¼Œå±•ç¤ºäº†é«˜ä¸­æ•°å­¦çš„çŸ¥è¯†ä½“ç³»ä¸å…³è”ã€‚",
            content: `
                <h3>ğŸ“š ä½¿ç”¨è¯´æ˜</h3>
                <p>è¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼é«˜ä¸­æ•°å­¦çŸ¥è¯†å›¾è°±ï¼Œå±•ç¤ºäº†é«˜ä¸­æ•°å­¦çš„çŸ¥è¯†ä½“ç³»ä¸å…³è”ã€‚</p>
                <ul>
                    <li>ç‚¹å‡»ä»»æ„èŠ‚ç‚¹æŸ¥çœ‹çŸ¥è¯†ç‚¹è¯¦ç»†ä¿¡æ¯</li>
                    <li>æ‹–æ‹½èŠ‚ç‚¹å¯ä»¥é‡æ–°å¸ƒå±€å›¾è°±</li>
                    <li>ä½¿ç”¨æœç´¢æ¡†å¿«é€ŸæŸ¥æ‰¾çŸ¥è¯†ç‚¹</li>
                    <li>ä½¿ç”¨ç­›é€‰åŠŸèƒ½æŒ‰å¹´çº§ã€ç±»å‹è¿‡æ»¤çŸ¥è¯†ç‚¹</li>
                </ul>
                
                <h3>ğŸ§© çŸ¥è¯†ä½“ç³»</h3>
                <p>é«˜ä¸­æ•°å­¦ä¸»è¦åŒ…å«ä»¥ä¸‹å››å¤§æ¨¡å—ï¼š</p>
                <ul>
                    <li><strong>ä»£æ•°</strong>ï¼šé›†åˆã€å‡½æ•°ã€æ•°åˆ—ã€ä¸ç­‰å¼ç­‰</li>
                    <li><strong>å‡ ä½•</strong>ï¼šå¹³é¢å‡ ä½•ã€ç«‹ä½“å‡ ä½•ã€è§£æå‡ ä½•ç­‰</li>
                    <li><strong>æ¦‚ç‡ç»Ÿè®¡</strong>ï¼šæ¦‚ç‡ã€ç»Ÿè®¡ã€æ’åˆ—ç»„åˆç­‰</li>
                    <li><strong>å¾®ç§¯åˆ†åˆæ­¥</strong>ï¼šå¯¼æ•°ã€ç§¯åˆ†ç­‰</li>
                </ul>
                
                <h3>ğŸš€ å­¦ä¹ å»ºè®®</h3>
                <p>å»ºè®®æŒ‰ç…§çŸ¥è¯†ä½“ç³»çš„å…³è”æ€§è¿›è¡Œç³»ç»Ÿå­¦ä¹ ï¼Œå…ˆä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥ã€‚</p>
                <p>ä½¿ç”¨æœ¬å›¾è°±å¯ä»¥ï¼š</p>
                <ul>
                    <li>äº†è§£çŸ¥è¯†ç‚¹ä¹‹é—´çš„å‰ç½®å…³ç³»</li>
                    <li>å‘ç°çŸ¥è¯†è–„å¼±ç¯èŠ‚</li>
                    <li>è§„åˆ’ç³»ç»Ÿæ€§å­¦ä¹ è·¯å¾„</li>
                </ul>
            `,
            resources: ["çŸ¥è¯†ç‚¹è®²è§£è§†é¢‘", "å…¸å‹ä¾‹é¢˜è®­ç»ƒ", "é«˜è€ƒè€ƒç‚¹è§£æ"]
        };
        
        // åˆå§‹åŒ–çŸ¥è¯†å›¾è°±
        function initKnowledgeGraph() {
            const container = document.getElementById('knowledge-graph');
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            // æ¸…é™¤å®¹å™¨å†…å®¹
            container.innerHTML = '';
            
            // åˆ›å»ºSVGç”»å¸ƒ
            const svg = d3.select("#knowledge-graph")
                .append("svg")
                .attr("width", width)
                .attr("height", height);
            
            // åˆ›å»ºç¼©æ”¾å’Œå¹³ç§»è¡Œä¸º
            const zoom = d3.zoom()
                .scaleExtent([0.1, 4])
                .on("zoom", (event) => {
                    g.attr("transform", event.transform);
                });
            
            svg.call(zoom);
            
            // åˆ›å»ºä¸»åˆ†ç»„
            const g = svg.append("g");
            
            // åˆ›å»ºåŠ›å¯¼å‘å›¾æ¨¡æ‹Ÿå™¨
            const simulation = d3.forceSimulation(knowledgeData.nodes)
                .force("link", d3.forceLink(knowledgeData.links)
                    .id(d => d.id)
                    .distance(120)
                    .strength(d => d.strength))
                .force("charge", d3.forceManyBody().strength(-350))
                .force("center", d3.forceCenter(width / 2, height / 2))
                .force("collision", d3.forceCollide().radius(60));
            
            // åˆ›å»ºè¿çº¿
            const link = g.append("g")
                .attr("class", "links")
                .selectAll("line")
                .data(knowledgeData.links)
                .enter()
                .append("line")
                .attr("class", "link")
                .attr("stroke-width", d => d.strength * 2.5);
            
            // åˆ›å»ºèŠ‚ç‚¹åˆ†ç»„
            const node = g.append("g")
                .attr("class", "nodes")
                .selectAll("g")
                .data(knowledgeData.nodes)
                .enter()
                .append("g")
                .attr("class", "node")
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            // ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ åœ†å½¢
            node.append("circle")
                .attr("r", d => {
                    // æ ¹æ®éš¾åº¦è®¾ç½®èŠ‚ç‚¹å¤§å°
                    if (d.difficulty === "åŸºç¡€") return 25;
                    if (d.difficulty === "ä¸­ç­‰") return 30;
                    if (d.difficulty === "è¿›é˜¶") return 35;
                    return 25;
                })
                .attr("fill", d => {
                    // æ ¹æ®çŸ¥è¯†ç±»å‹è®¾ç½®èŠ‚ç‚¹é¢œè‰²
                    const colors = {
                        "ä»£æ•°": "#8A2BE2",
                        "å‡ ä½•": "#00B8FF",
                        "æ¦‚ç‡ç»Ÿè®¡": "#FF0080",
                        "å¾®ç§¯åˆ†": "#00FF9D",
                        "å‡½æ•°": "#FFA500",
                        "ç»¼åˆ": "#FFD700"
                    };
                    return colors[d.group] || "#8A2BE2";
                })
                .attr("stroke", "white")
                .attr("stroke-width", 2.5);
            
            // ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ æ–‡å­—
            node.append("text")
                .attr("dx", 0)
                .attr("dy", ".35em")
                .attr("text-anchor", "middle")
                .text(d => d.id)
                .attr("font-size", d => {
                    // æ ¹æ®èŠ‚ç‚¹å¤§å°è°ƒæ•´å­—ä½“å¤§å°
                    if (d.difficulty === "åŸºç¡€") return "12px";
                    if (d.difficulty === "ä¸­ç­‰") return "14px";
                    if (d.difficulty === "è¿›é˜¶") return "16px";
                    return "12px";
                })
                .attr("font-weight", "500");
            
            // èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶
            node.on("click", (event, d) => {
                // æ›´æ–°ä¾§è¾¹æ å†…å®¹
                updateKnowledgeDetail(d);
                
                // é«˜äº®å½“å‰èŠ‚ç‚¹å’Œå…³è”èŠ‚ç‚¹
                highlightNode(d.id);
            });
            
            // æ›´æ–°åŠ›å¯¼å‘å›¾
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);
                
                node
                    .attr("transform", d => `translate(${d.x},${d.y})`);
            });
            
            // æ‹–åŠ¨å‡½æ•°
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
            
            // é«˜äº®èŠ‚ç‚¹å‡½æ•°
            function highlightNode(nodeId) {
                // é‡ç½®æ‰€æœ‰èŠ‚ç‚¹å’Œè¿çº¿æ ·å¼
                node.select("circle")
                    .attr("stroke", "white")
                    .attr("stroke-width", 2.5);
                
                link
                    .attr("stroke", "rgba(255, 255, 255, 0.4)")
                    .attr("stroke-width", 2);
                
                // é«˜äº®å½“å‰èŠ‚ç‚¹
                node.filter(d => d.id === nodeId)
                    .select("circle")
                    .attr("stroke", "#00FF9D")
                    .attr("stroke-width", 5);
                
                // é«˜äº®ä¸å½“å‰èŠ‚ç‚¹ç›¸è¿çš„è¿çº¿
                link
                    .filter(d => d.source.id === nodeId || d.target.id === nodeId)
                    .attr("stroke", "#00FF9D")
                    .attr("stroke-width", 4);
                
                // é«˜äº®ä¸å½“å‰èŠ‚ç‚¹ç›¸è¿çš„èŠ‚ç‚¹
                const connectedNodeIds = new Set();
                knowledgeData.links.forEach(link => {
                    if (link.source.id === nodeId) connectedNodeIds.add(link.target.id);
                    if (link.target.id === nodeId) connectedNodeIds.add(link.source.id);
                });
                
                node.filter(d => connectedNodeIds.has(d.id))
                    .select("circle")
                    .attr("stroke", "#00B8FF")
                    .attr("stroke-width", 4);
            }
            
            // ä¿å­˜èŠ‚ç‚¹å’Œè¿çº¿å¼•ç”¨ï¼Œä»¥ä¾¿åç»­è¿‡æ»¤
            window.knowledgeGraph = {
                nodes: node,
                links: link,
                simulation: simulation,
                allNodes: knowledgeData.nodes,
                allLinks: knowledgeData.links
            };
        }
        
        // æ›´æ–°çŸ¥è¯†è¯¦æƒ…
        function updateKnowledgeDetail(nodeData) {
            const detailContainer = document.getElementById('knowledge-detail');
            const detail = knowledgeDetails[nodeData.id] || {
                title: nodeData.id,
                subtitle: `${nodeData.grade} | ${nodeData.group} | ${nodeData.difficulty}`,
                description: nodeData.description,
                content: `
                    <h3>çŸ¥è¯†ç‚¹ç®€ä»‹</h3>
                    <p>${nodeData.description}</p>
                    
                    <h3>å­¦ä¹ å»ºè®®</h3>
                    <p>å»ºè®®å…ˆæŒæ¡ç›¸å…³å‰ç½®çŸ¥è¯†ï¼Œå†å­¦ä¹ æœ¬çŸ¥è¯†ç‚¹ã€‚</p>
                    
                    <h3>å…³è”çŸ¥è¯†ç‚¹</h3>
                    <p>ç‚¹å‡»å›¾è°±ä¸­ä¸æœ¬èŠ‚ç‚¹ç›¸è¿çš„èŠ‚ç‚¹ï¼Œå¯ä»¥æŸ¥çœ‹ç›¸å…³çŸ¥è¯†ç‚¹ã€‚</p>
                `,
                resources: ["çŸ¥è¯†ç‚¹è®²è§£", "ä¾‹é¢˜è®­ç»ƒ", "ç»¼åˆç»ƒä¹ "]
            };
            
            detailContainer.innerHTML = `
                <div class="detail-header">
                    <h2 class="detail-title">${detail.title}</h2>
                    <p class="detail-subtitle">${detail.subtitle}</p>
                </div>
                <div class="detail-content">
                    <div class="detail-section">
                        <h3>ğŸ“– çŸ¥è¯†ç‚¹æ¦‚è¿°</h3>
                        <p>${detail.description}</p>
                        ${detail.content}
                    </div>
                    <div class="detail-section">
                        <h3>ğŸ”— å­¦ä¹ èµ„æº</h3>
                        <div class="resource-links">
                            ${detail.resources.map(resource => 
                                `<a href="#" class="resource-link">${resource}</a>`
                            ).join('')}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ç­›é€‰çŸ¥è¯†ç‚¹
        function filterKnowledgeGraph() {
            const gradeFilter = document.getElementById('grade-filter').value;
            const typeFilter = document.getElementById('type-filter').value;
            const difficultyEasy = document.getElementById('difficulty-easy').checked;
            const difficultyMedium = document.getElementById('difficulty-medium').checked;
            const difficultyHard = document.getElementById('difficulty-hard').checked;
            const showLinks = document.getElementById('show-links').checked;
            
            // ç­›é€‰èŠ‚ç‚¹
            const filteredNodes = knowledgeData.nodes.filter(node => {
                let pass = true;
                
                // å¹´çº§ç­›é€‰
                if (gradeFilter !== 'all' && node.grade !== gradeFilter) {
                    pass = false;
                }
                
                // ç±»å‹ç­›é€‰
                if (typeFilter !== 'all' && node.group !== typeFilter) {
                    pass = false;
                }
                
                // éš¾åº¦ç­›é€‰
                if (!((node.difficulty === 'åŸºç¡€' && difficultyEasy) ||
                      (node.difficulty === 'ä¸­ç­‰' && difficultyMedium) ||
                      (node.difficulty === 'è¿›é˜¶' && difficultyHard))) {
                    pass = false;
                }
                
                return pass;
            });
            
            // ç­›é€‰è¿çº¿ï¼ˆåªè¿æ¥ç­›é€‰åçš„èŠ‚ç‚¹ï¼‰
            const filteredLinks = knowledgeData.links.filter(link => {
                const sourceNode = filteredNodes.find(n => n.id === link.source.id || n.id === link.source);
                const targetNode = filteredNodes.find(n => n.id === link.target.id || n.id === link.target);
                return sourceNode && targetNode;
            });
            
            // æ›´æ–°å›¾è°±
            updateGraphWithFilteredData(filteredNodes, filteredLinks, showLinks);
        }
        
        // ä½¿ç”¨ç­›é€‰åçš„æ•°æ®æ›´æ–°å›¾è°±
        function updateGraphWithFilteredData(filteredNodes, filteredLinks, showLinks) {
            const graph = window.knowledgeGraph;
            
            if (!graph) return;
            
            // æ›´æ–°èŠ‚ç‚¹
            const nodeUpdate = graph.nodes
                .data(filteredNodes, d => d.id);
            
            // ç§»é™¤ä¸å†æ˜¾ç¤ºçš„èŠ‚ç‚¹
            nodeUpdate.exit().remove();
            
            // æ·»åŠ æ–°èŠ‚ç‚¹
            const nodeEnter = nodeUpdate.enter()
                .append("g")
                .attr("class", "node")
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            // ä¸ºæ–°èŠ‚ç‚¹æ·»åŠ åœ†å½¢
            nodeEnter.append("circle")
                .attr("r", d => {
                    if (d.difficulty === "åŸºç¡€") return 25;
                    if (d.difficulty === "ä¸­ç­‰") return 30;
                    if (d.difficulty === "è¿›é˜¶") return 35;
                    return 25;
                })
                .attr("fill", d => {
                    const colors = {
                        "ä»£æ•°": "#8A2BE2",
                        "å‡ ä½•": "#00B8FF",
                        "æ¦‚ç‡ç»Ÿè®¡": "#FF0080",
                        "å¾®ç§¯åˆ†": "#00FF9D",
                        "å‡½æ•°": "#FFA500",
                        "ç»¼åˆ": "#FFD700"
                    };
                    return colors[d.group] || "#8A2BE2";
                })
                .attr("stroke", "white")
                .attr("stroke-width", 2.5);
            
            // ä¸ºæ–°èŠ‚ç‚¹æ·»åŠ æ–‡å­—
            nodeEnter.append("text")
                .attr("dx", 0)
                .attr("dy", ".35em")
                .attr("text-anchor", "middle")
                .text(d => d.id)
                .attr("font-size", d => {
                    if (d.difficulty === "åŸºç¡€") return "12px";
                    if (d.difficulty === "ä¸­ç­‰") return "14px";
                    if (d.difficulty === "è¿›é˜¶") return "16px";
                    return "12px";
                })
                .attr("font-weight", "500");
            
            // åˆå¹¶æ–°æ—§èŠ‚ç‚¹
            const node = nodeEnter.merge(graph.nodes);
            
            // æ›´æ–°è¿çº¿
            const linkUpdate = graph.links
                .data(showLinks ? filteredLinks : [], d => `${d.source.id || d.source}-${d.target.id || d.target}`);
            
            // ç§»é™¤ä¸å†æ˜¾ç¤ºçš„è¿çº¿
            linkUpdate.exit().remove();
            
            // æ·»åŠ æ–°è¿çº¿
            const linkEnter = linkUpdate.enter()
                .append("line")
                .attr("class", "link")
                .attr("stroke-width", d => d.strength * 2.5);
            
            // åˆå¹¶æ–°æ—§è¿çº¿
            const link = linkEnter.merge(graph.links);
            
            // æ›´æ–°åŠ›å¯¼å‘å›¾
            graph.simulation.nodes(filteredNodes);
            graph.simulation.force("link").links(showLinks ? filteredLinks : []);
            graph.simulation.alpha(0.3).restart();
            
            // é‡æ–°ç»‘å®šäº‹ä»¶
            node.on("click", (event, d) => {
                updateKnowledgeDetail(d);
                highlightNode(d.id);
            });
            
            // æ›´æ–°å¼•ç”¨
            window.knowledgeGraph.nodes = node;
            window.knowledgeGraph.links = link;
            
            // æ‹–åŠ¨å‡½æ•°
            function dragstarted(event, d) {
                if (!event.active) graph.simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) graph.simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
            
            // é«˜äº®èŠ‚ç‚¹å‡½æ•°
            function highlightNode(nodeId) {
                node.select("circle")
                    .attr("stroke", "white")
                    .attr("stroke-width", 2.5);
                
                link
                    .attr("stroke", "rgba(255, 255, 255, 0.4)")
                    .attr("stroke-width", 2);
                
                node.filter(d => d.id === nodeId)
                    .select("circle")
                    .attr("stroke", "#00FF9D")
                    .attr("stroke-width", 5);
                
                if (showLinks) {
                    link
                        .filter(d => d.source.id === nodeId || d.target.id === nodeId)
                        .attr("stroke", "#00FF9D")
                        .attr("stroke-width", 4);
                    
                    const connectedNodeIds = new Set();
                    filteredLinks.forEach(link => {
                        if (link.source.id === nodeId) connectedNodeIds.add(link.target.id);
                        if (link.target.id === nodeId) connectedNodeIds.add(link.source.id);
                    });
                    
                    node.filter(d => connectedNodeIds.has(d.id))
                        .select("circle")
                        .attr("stroke", "#00B8FF")
                        .attr("stroke-width", 4);
                }
            }
        }
        
        // æœç´¢çŸ¥è¯†ç‚¹
        function searchKnowledge() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase().trim();
            
            if (!searchTerm) {
                // å¦‚æœæœç´¢æ¡†ä¸ºç©ºï¼Œé‡ç½®å›¾è°±
                resetGraph();
                return;
            }
            
            // æŸ¥æ‰¾åŒ¹é…çš„èŠ‚ç‚¹
            const matchedNodes = knowledgeData.nodes.filter(node => 
                node.id.toLowerCase().includes(searchTerm) || 
                node.description.toLowerCase().includes(searchTerm) ||
                node.group.toLowerCase().includes(searchTerm)
            );
            
            if (matchedNodes.length === 0) {
                alert(`æœªæ‰¾åˆ°åŒ…å«"${searchTerm}"çš„çŸ¥è¯†ç‚¹`);
                return;
            }
            
            // æŸ¥æ‰¾ä¸åŒ¹é…èŠ‚ç‚¹ç›¸è¿çš„è¿çº¿
            const matchedNodeIds = matchedNodes.map(node => node.id);
            const matchedLinks = knowledgeData.links.filter(link => 
                matchedNodeIds.includes(link.source.id || link.source) || 
                matchedNodeIds.includes(link.target.id || link.target)
            );
            
            // æŸ¥æ‰¾é€šè¿‡è¿çº¿è¿æ¥çš„èŠ‚ç‚¹
            const connectedNodeIds = new Set(matchedNodeIds);
            matchedLinks.forEach(link => {
                connectedNodeIds.add(link.source.id || link.source);
                connectedNodeIds.add(link.target.id || link.target);
            });
            
            const allRelatedNodes = knowledgeData.nodes.filter(node => 
                connectedNodeIds.has(node.id)
            );
            
            // æ›´æ–°å›¾è°±æ˜¾ç¤ºæœç´¢ç»“æœ
            updateGraphWithFilteredData(allRelatedNodes, matchedLinks, true);
            
            // æ˜¾ç¤ºç¬¬ä¸€ä¸ªåŒ¹é…èŠ‚ç‚¹çš„è¯¦æƒ…
            updateKnowledgeDetail(matchedNodes[0]);
        }
        
        // é‡ç½®å›¾è°±
        function resetGraph() {
            document.getElementById('search-input').value = '';
            document.getElementById('grade-filter').value = 'all';
            document.getElementById('type-filter').value = 'all';
            document.getElementById('difficulty-easy').checked = true;
            document.getElementById('difficulty-medium').checked = true;
            document.getElementById('difficulty-hard').checked = true;
            document.getElementById('show-links').checked = true;
            
            // é‡ç½®è¯¦æƒ…é¢æ¿
            const detailContainer = document.getElementById('knowledge-detail');
            detailContainer.innerHTML = `
                <div class="detail-header">
                    <h2 class="detail-title">${defaultDetail.title}</h2>
                    <p class="detail-subtitle">${defaultDetail.subtitle}</p>
                </div>
                <div class="detail-content">
                    <div class="detail-section">
                        <h3>ğŸ“– çŸ¥è¯†ç‚¹æ¦‚è¿°</h3>
                        <p>${defaultDetail.description}</p>
                        ${defaultDetail.content}
                    </div>
                    <div class="detail-section">
                        <h3>ğŸ”— å­¦ä¹ èµ„æº</h3>
                        <div class="resource-links">
                            ${defaultDetail.resources.map(resource => 
                                `<a href="#" class="resource-link">${resource}</a>`
                            ).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            // é‡æ–°åˆå§‹åŒ–å›¾è°±
            initKnowledgeGraph();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–çŸ¥è¯†å›¾è°±
            initKnowledgeGraph();
            
            // æœç´¢æ¡†äº‹ä»¶
            document.getElementById('search-input').addEventListener('input', searchKnowledge);
            
            // ç­›é€‰é¢æ¿åˆ‡æ¢
            document.getElementById('filter-toggle').addEventListener('click', function() {
                const filterPanel = document.getElementById('filter-panel');
                filterPanel.style.display = filterPanel.style.display === 'block' ? 'none' : 'block';
            });
            
            // åº”ç”¨ç­›é€‰
            document.getElementById('apply-filter').addEventListener('click', function() {
                filterKnowledgeGraph();
                document.getElementById('filter-panel').style.display = 'none';
            });
            
            // é‡ç½®å›¾è°±
            document.getElementById('reset-graph').addEventListener('click', resetGraph);
            
            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ç­›é€‰é¢æ¿
            document.addEventListener('click', function(event) {
                const filterPanel = document.getElementById('filter-panel');
                const filterToggle = document.getElementById('filter-toggle');
                
                if (!filterPanel.contains(event.target) && !filterToggle.contains(event.target)) {
                    filterPanel.style.display = 'none';
                }
            });
            
            // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°åˆå§‹åŒ–å›¾è°±
            window.addEventListener('resize', function() {
                // å»¶è¿Ÿæ‰§è¡Œä»¥é¿å…é¢‘ç¹è§¦å‘
                clearTimeout(window.resizeTimer);
                window.resizeTimer = setTimeout(function() {
                    initKnowledgeGraph();
                }, 250);
            });
            
            // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuToggle && mobileMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenu.classList.toggle('active');
                    
                    // æ±‰å ¡èœå•åŠ¨ç”»
                    const hamburger = this.querySelector('.hamburger');
                    hamburger.classList.toggle('active');
                });
            }
            
            // ç‚¹å‡»ç§»åŠ¨ç«¯èœå•é¡¹å…³é—­èœå•
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.remove('active');
                    document.querySelector('.hamburger').classList.remove('active');
                });
            });
            
            // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
            const mainNav = document.querySelector('.main-nav');
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    mainNav.classList.add('scrolled');
                } else {
                    mainNav.classList.remove('scrolled');
                }
            });
            
            // è®¾ç½®å½“å‰é¡µé¢æ¿€æ´»çŠ¶æ€
            function setActiveNavItem() {
                // è·å–å½“å‰é¡µé¢è·¯å¾„
                const currentPath = window.location.pathname;
                
                // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                document.querySelectorAll('.mobile-nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                // è®¾ç½®å¯¹åº”å¯¼èˆªé¡¹ä¸ºæ¿€æ´»çŠ¶æ€
                if (currentPath.includes('æ•°å­¦å®‡å®™') || currentPath.includes('index')) {
                    setNavActive('home');
                } else if (currentPath.includes('problem-lab')) {
                    setNavActive('problem-lab');
                } else if (currentPath.includes('question-bank')) {
                    setNavActive('question-bank');
                } else if (currentPath.includes('exam-prep')) {
                    setNavActive('exam-prep');
                } else if (currentPath.includes('community')) {
                    setNavActive('community');
                }
            }
            
            function setNavActive(page) {
                // æ¡Œé¢ç«¯å¯¼èˆª
                const desktopLink = document.querySelector(`.nav-link[data-page="${page}"]`);
                if (desktopLink) {
                    desktopLink.classList.add('active');
                }
                
                // ç§»åŠ¨ç«¯å¯¼èˆª
                const mobileLinks = document.querySelectorAll('.mobile-nav-link');
                mobileLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    if ((page === 'home' && (href.includes('æ•°å­¦å®‡å®™') || href.includes('index'))) ||
                        (page !== 'home' && href.includes(page))) {
                        link.classList.add('active');
                    }
                });
            }
            
            // åˆå§‹åŒ–æ¿€æ´»çŠ¶æ€
            setActiveNavItem();
            
            // ç”¨æˆ·èœå•ç‚¹å‡»å¤–éƒ¨å…³é—­
            document.addEventListener('click', function(event) {
                const userMenu = document.querySelector('.user-menu');
                const userAvatar = document.querySelector('.user-avatar');
                
                if (userMenu && userAvatar && 
                    !userMenu.contains(event.target) && 
                    !userAvatar.contains(event.target)) {
                    // ç‚¹å‡»å¤–éƒ¨ï¼Œå…³é—­ç”¨æˆ·èœå•
                    userMenu.style.opacity = '0';
                    userMenu.style.visibility = 'hidden';
                    userMenu.style.transform = 'translateY(15px)';
                }
            });
            
            // å¯¼èˆªé“¾æ¥ç‚¹å‡»æ•ˆæœ
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    // æ·»åŠ ç‚¹å‡»æ•ˆæœ
                    this.style.transform = 'scale(0.95)';
                    
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 200);
                    
                    // æ›´æ–°æ¿€æ´»çŠ¶æ€
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // ç§»åŠ¨ç«¯ç‚¹å‡»åå…³é—­èœå•
                    if (window.innerWidth <= 1200) {
                        mobileMenu.classList.remove('active');
                        document.querySelector('.hamburger').classList.remove('active');
                    }
                });
            });
        });
    </script>
</body>
</html>